# Изучаем сетевой namespace внутри пода 

## Описание.
Проверим, что сетевой namespace контейнера nginx в поде и pause контейнера в том же поде один и тот же.

## Поехали!
```
kubectl run nginx --image=nginx
kubectl get po -owide
kubectl get n -owide
```
* Смотрим здесь, на какую ноду попал под и подключаемся к ней по ssh.
sudo -i

### На ноде.
```
ps -ef | grep nginx
root      863302  863210  0 06:56 ?        00:00:00 nginx: master process nginx -g daemon off;
```

```
ps -ef | grep pause
65535       2112    2033  0 Aug19 ?        00:00:00 /pause
65535       2119    2032  0 Aug19 ?        00:00:00 /pause
65535       2125    2034  0 Aug19 ?        00:00:00 /pause
65535       2142    2035  0 Aug19 ?        00:00:00 /pause
65535       3440    3403  0 Aug19 ?        00:00:00 /pause
65535       3491    3438  0 Aug19 ?        00:00:00 /pause
65535       3757    3724  0 Aug19 ?        00:00:00 /pause
65535       4041    4017  0 Aug19 ?        00:00:00 /pause
65535       4243    4210  0 Aug19 ?        00:00:00 /pause
65535       4295    4263  0 Aug19 ?        00:00:00 /pause
65535       5277    5255  0 Aug19 ?        00:00:00 /pause
65535     863230  863210  0 06:56 ?        00:00:00 /pause
root      863706  863588  0 06:56 pts/0    00:00:00 grep --color=auto pause
```

* Получим идентификаторы namespace, в которых находятся pause контейнеры.
```
lsns | grep pause | grep net
4026532526 net         2   4243 65535            /pause
4026532620 net         4 863230 65535            /pause
4026532710 net         2   3757 65535            /pause
4026532757 net         2   3440 65535            /pause
4026532807 net         2   4041 65535            /pause
4026532895 net         3   4295 65535            /pause
4026533051 net         2   3491 65535            /pause
```

* Получим идентификатор namespace, в котором работает nginx.
```
readlink /proc/863302/task/863302/ns/net
net:[4026532620]
```

Где 863302 - идентификатор процесса, полученного в результате выполнения команды ps -ef | grep nginx.

## Результат.
Как можно заметить nginx контейнер и один из контейнеров pause находятся в одном сетевом namespace. 
У меня это 4026532620.
